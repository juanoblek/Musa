<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - Formularios de Pago</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .debug-panel {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .status-ok { color: #28a745; }
        .status-error { color: #dc3545; }
        .status-warning { color: #ffc107; }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            margin: 5px;
            cursor: pointer;
        }
        .test-button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <h1>üîß Debug de Formularios de Pago</h1>
    
    <div class="debug-panel">
        <h2>üìã Estado de los Formularios</h2>
        <div id="formStatus">Verificando...</div>
    </div>
    
    <div class="debug-panel">
        <h2>üéØ Pruebas de Navegaci√≥n</h2>
        <button class="test-button" onclick="testCard()">üí≥ Probar Tarjeta</button>
        <button class="test-button" onclick="testPSE()">üè¶ Probar PSE</button>
        <button class="test-button" onclick="testNequi()">üì± Probar Nequi</button>
        <button class="test-button" onclick="testWhatsApp()">üí¨ Probar WhatsApp</button>
    </div>
    
    <div class="debug-panel">
        <h2>üîç Iframe de Prueba</h2>
        <iframe src="pago-premium.html" width="100%" height="600" style="border: 1px solid #ccc; border-radius: 5px;"></iframe>
    </div>

    <script>
        // Verificar estado de formularios
        function checkFormStatus() {
            const iframe = document.querySelector('iframe');
            let status = '';
            
            try {
                // Acceder al contenido del iframe
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                
                const cardForm = iframeDoc.getElementById('cardForm');
                const pseForm = iframeDoc.getElementById('pseForm');
                const methodTabs = iframeDoc.querySelectorAll('.method-tab');
                
                status += `<div class="${cardForm ? 'status-ok' : 'status-error'}">
                    üí≥ Formulario de Tarjeta: ${cardForm ? '‚úÖ Encontrado' : '‚ùå No encontrado'}
                </div>`;
                
                status += `<div class="${pseForm ? 'status-ok' : 'status-error'}">
                    üè¶ Formulario PSE: ${pseForm ? '‚úÖ Encontrado' : '‚ùå No encontrado'}
                </div>`;
                
                status += `<div class="${methodTabs.length > 0 ? 'status-ok' : 'status-error'}">
                    üìã Pesta√±as de M√©todos: ${methodTabs.length > 0 ? `‚úÖ ${methodTabs.length} encontradas` : '‚ùå No encontradas'}
                </div>`;
                
                // Verificar contenido del formulario de tarjeta
                if (cardForm) {
                    const inputs = cardForm.querySelectorAll('input');
                    status += `<div class="${inputs.length > 0 ? 'status-ok' : 'status-warning'}">
                        üî¢ Campos de Tarjeta: ${inputs.length > 0 ? `‚úÖ ${inputs.length} campos` : '‚ö†Ô∏è Sin campos'}
                    </div>`;
                }
                
            } catch (e) {
                status += `<div class="status-warning">‚ö†Ô∏è No se puede acceder al iframe: ${e.message}</div>`;
            }
            
            document.getElementById('formStatus').innerHTML = status;
        }
        
        // Funciones de prueba
        function testCard() {
            console.log('üß™ Probando formulario de tarjeta...');
            sendMessageToIframe('testMethod', 'card');
        }
        
        function testPSE() {
            console.log('üß™ Probando formulario PSE...');
            sendMessageToIframe('testMethod', 'pse');
        }
        
        function testNequi() {
            console.log('üß™ Probando formulario Nequi...');
            sendMessageToIframe('testMethod', 'nequi_daviplata');
        }
        
        function testWhatsApp() {
            console.log('üß™ Probando formulario WhatsApp...');
            sendMessageToIframe('testMethod', 'whatsapp');
        }
        
        function sendMessageToIframe(action, data) {
            const iframe = document.querySelector('iframe');
            if (iframe && iframe.contentWindow) {
                iframe.contentWindow.postMessage({action, data}, '*');
            }
        }
        
        // Escuchar cuando el iframe cargue
        document.querySelector('iframe').onload = function() {
            setTimeout(checkFormStatus, 1000);
        };
        
        // Verificar cada 5 segundos
        setInterval(checkFormStatus, 5000);
    </script>
</body>
</html>