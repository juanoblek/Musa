<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ Convertir Modal AHORA</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-family: Arial, sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .conversion-panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 3rem;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.2);
        }
        .btn-convert {
            background: linear-gradient(45deg, #ff6b6b, #ffd93d);
            border: none;
            color: white;
            font-weight: bold;
            padding: 1.5rem 3rem;
            border-radius: 50px;
            font-size: 1.2rem;
            margin: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            cursor: pointer;
        }
        .btn-convert:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.4);
            color: white;
        }
        .console-command {
            background: #1a1a1a;
            color: #00ff00;
            padding: 1.5rem;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            margin: 1rem 0;
            border: 2px solid #333;
            text-align: left;
            word-wrap: break-word;
        }
        .status {
            margin: 1rem 0;
            padding: 1rem;
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
        }
    </style>
</head>
<body>
    <div class="conversion-panel">
        <h1>üéØ Convertir Placeholder a Video</h1>
        <p class="lead">Soluci√≥n directa para el modal del producto "asdasdsa"</p>
        
        <div class="status" id="status">
            <strong>Estado:</strong> <span id="statusText">Listo para convertir</span>
        </div>
        
        <button class="btn btn-convert" onclick="convertirAhora()">
            üî• CONVERTIR AHORA
        </button>
        
        <div class="mt-4">
            <h4>üìã Comando para Consola:</h4>
            <p>Copia y pega este c√≥digo en la consola del navegador (F12):</p>
            <div class="console-command" onclick="copiarComando()">
(function(){
    const modal = document.getElementById('ProductViewModal');
    if(!modal) { console.error('‚ùå Modal no encontrado'); return; }
    
    const img = modal.querySelector('img[src*="placeholder.svg"]');
    if(!img) { console.error('‚ùå Placeholder no encontrado'); return; }
    
    const video = document.createElement('video');
    video.src = 'uploads/video_68f276851285d_1760720517.mp4';
    video.controls = true;
    video.muted = true;
    video.autoplay = true;
    video.loop = true;
    video.style.cssText = img.style.cssText;
    video.className = img.className;
    video.alt = img.alt;
    
    img.parentNode.replaceChild(video, img);
    console.log('üéØ ¬°CONVERTIDO! Video mostrado en modal');
})();
            </div>
            <small>Haz clic en el c√≥digo para copiarlo</small>
        </div>
        
        <div class="mt-4">
            <h4>üé¨ URL del Video:</h4>
            <div class="console-command">
                uploads/video_68f276851285d_1760720517.mp4
            </div>
        </div>
    </div>

    <script>
        function convertirAhora() {
            const statusText = document.getElementById('statusText');
            statusText.textContent = 'Ejecutando conversi√≥n...';
            
            try {
                // Intentar acceder a la ventana padre si estamos en iframe
                const targetWindow = window.parent !== window ? window.parent : window;
                const modal = targetWindow.document.getElementById('ProductViewModal');
                
                if (!modal) {
                    statusText.textContent = '‚ùå Modal no encontrado. Aseg√∫rate de que el modal est√© abierto.';
                    return;
                }
                
                const placeholder = modal.querySelector('img[src*="placeholder.svg"]');
                if (!placeholder) {
                    statusText.textContent = '‚ùå No se encontr√≥ placeholder en el modal.';
                    return;
                }
                
                // Crear elemento video
                const video = targetWindow.document.createElement('video');
                video.src = 'uploads/video_68f276851285d_1760720517.mp4';
                video.controls = true;
                video.muted = true;
                video.autoplay = true;
                video.loop = true;
                video.playsInline = true;
                video.style.cssText = placeholder.style.cssText;
                video.className = placeholder.className;
                video.alt = placeholder.alt;
                
                // Reemplazar
                placeholder.parentNode.replaceChild(video, placeholder);
                
                statusText.textContent = '‚úÖ ¬°√âXITO! Placeholder convertido a video';
                
                // Tambi√©n actualizar el bot√≥n carrito
                const cartButton = modal.querySelector('#productViewAddToCart');
                if (cartButton) {
                    cartButton.setAttribute('data-image', 'uploads/video_68f276851285d_1760720517.mp4');
                }
                
                console.log('üéØ Conversi√≥n completada exitosamente');
                
            } catch (error) {
                console.error('Error en conversi√≥n:', error);
                statusText.textContent = '‚ùå Error: ' + error.message;
            }
        }
        
        function copiarComando() {
            const comando = `(function(){
    const modal = document.getElementById('ProductViewModal');
    if(!modal) { console.error('‚ùå Modal no encontrado'); return; }
    
    const img = modal.querySelector('img[src*="placeholder.svg"]');
    if(!img) { console.error('‚ùå Placeholder no encontrado'); return; }
    
    const video = document.createElement('video');
    video.src = 'uploads/video_68f276851285d_1760720517.mp4';
    video.controls = true;
    video.muted = true;
    video.autoplay = true;
    video.loop = true;
    video.style.cssText = img.style.cssText;
    video.className = img.className;
    video.alt = img.alt;
    
    img.parentNode.replaceChild(video, img);
    console.log('üéØ ¬°CONVERTIDO! Video mostrado en modal');
})();`;
            
            navigator.clipboard.writeText(comando).then(() => {
                alert('‚úÖ C√≥digo copiado al portapapeles. P√©galo en la consola (F12)');
            }).catch(() => {
                // Fallback para navegadores que no soportan clipboard API
                const textArea = document.createElement('textarea');
                textArea.value = comando;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('‚úÖ C√≥digo copiado al portapapeles. P√©galo en la consola (F12)');
            });
        }
        
        console.log('üéØ Herramienta de conversi√≥n cargada');
    </script>
</body>
</html>